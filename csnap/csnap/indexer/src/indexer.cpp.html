<!DOCTYPE html>
<html><head><title>C:/projects/csnap/indexer/src/indexer.cpp</title><link id="codestylesheet" rel="stylesheet" type="text/css" href="../../../syntax.qtcreator.css"/><link rel="stylesheet" type="text/css" href="../../../tooltip.css"/><script type="text/javascript">var csnapRootPath="../../../";</script><script type="text/javascript" src="../../../codenav.js"> </script></head><body><div id="content"><h2>Code</h2><table class="code" file-id="60"><tbody><tr><th id="L1">1</th><td><i>// Copyright (C) 2023 Vincent Chambrin</i></td></tr><tr><th id="L2">2</th><td><i>// This file is part of the 'csnap' project.</i></td></tr><tr><th id="L3">3</th><td><i>// For conditions of distribution and use, see copyright notice in LICENSE.</i></td></tr><tr><th id="L4">4</th><td/></tr><tr><th id="L5">5</th><td><u>#include</u> <a class="include" href="../include/csnap/indexer/indexer.h.html"><span class="include">"indexer.h"</span></a></td></tr><tr><th id="L6">6</th><td/></tr><tr><th id="L7">7</th><td><u>#include</u> <a class="include" href="../../db/include/csnap/database/snapshot.h.html"><span class="include">"csnap/database/snapshot.h"</span></a></td></tr><tr><th id="L8">8</th><td/></tr><tr><th id="L9">9</th><td><u>#include</u> <a class="include" href="../../model/include/csnap/model/file.h.html"><span class="include">"csnap/model/file.h"</span></a></td></tr><tr><th id="L10">10</th><td><u>#include</u> <a class="include" href="../../model/include/csnap/model/reference.h.html"><span class="include">"csnap/model/reference.h"</span></a></td></tr><tr><th id="L11">11</th><td><u>#include</u> <a class="include" href="../../model/include/csnap/model/symbol.h.html"><span class="include">"csnap/model/symbol.h"</span></a></td></tr><tr><th id="L12">12</th><td><u>#include</u> <a class="include" href="../../model/include/csnap/model/usrmap.h.html"><span class="include">"csnap/model/usrmap.h"</span></a></td></tr><tr><th id="L13">13</th><td/></tr><tr><th id="L14">14</th><td><u>#include</u> <a class="include" href="../libclang-utils/include/libclang-utils/index-action.h.html"><span class="include">&lt;libclang-utils/index-action.h&gt;</span></a></td></tr><tr><th id="L15">15</th><td><u>#include</u> <a class="include" href="../libclang-utils/include/libclang-utils/clang-cursor.h.html"><span class="include">&lt;libclang-utils/clang-cursor.h&gt;</span></a></td></tr><tr><th id="L16">16</th><td/></tr><tr><th id="L17">17</th><td><u>#include</u> <span class="include">&lt;cassert&gt;</span></td></tr><tr><th id="L18">18</th><td><u>#include</u> <span class="include">&lt;filesystem&gt;</span></td></tr><tr><th id="L19">19</th><td><u>#include</u> <span class="include">&lt;iostream&gt;</span></td></tr><tr><th id="L20">20</th><td/></tr><tr><th id="L21">21</th><td><b>namespace</b> <dfn class="namespace" sym-ref="4505.csnap">csnap</dfn></td></tr><tr><th id="L22">22</th><td>{</td></tr><tr><th id="L23">23</th><td/></tr><tr><th id="L24">24</th><td><b>class</b> <dfn class="type cxxclass" sym-ref="5444.TranslationUnitIndexer">TranslationUnitIndexer</dfn> : <b>public</b> <span class="namespace" sym-ref="4133.libclang">libclang</span>::<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L122" class="type cxxclass" sym-ref="5277.BasicIndexer">BasicIndexer</a></td></tr><tr><th id="L25">25</th><td>{</td></tr><tr><th id="L26">26</th><td><b>private</b>:</td></tr><tr><th id="L27">27</th><td>  <span class="namespace" sym-ref="4505.csnap">csnap</span>::<a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>&amp; <dfn class="member field" sym-ref="5445.indexer">indexer</dfn>;</td></tr><tr><th id="L28">28</th><td>  <a href="../../model/include/csnap/model/usrmap.h.html#L24" class="type cxxclass" sym-ref="5218.UsrMap">UsrMap</a> <dfn class="member field" sym-ref="5446.usrs">usrs</dfn>;</td></tr><tr><th id="L29">29</th><td>  <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="1316.map">map</span>&lt;<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxtypealias" sym-ref="32.string">string</span>, <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="506.shared_ptr">shared_ptr</span>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>&gt;&gt; <dfn class="member field" sym-ref="5447.symbols">symbols</dfn>;</td></tr><tr><th id="L30">30</th><td/></tr><tr><th id="L31">31</th><td><b>public</b>:</td></tr><tr><th id="L32">32</th><td>  <a href="../include/csnap/indexer/indexer.h.html#L33" class="type struct" sym-ref="5301.IndexingResult">IndexingResult</a> <dfn class="member field" sym-ref="5448.result">result</dfn>;</td></tr><tr><th id="L33">33</th><td/></tr><tr><th id="L34">34</th><td><b>public</b>:</td></tr><tr><th id="L35">35</th><td>  <dfn class="member constructor" sym-ref="5449.TranslationUnitIndexer">TranslationUnitIndexer</dfn>(<span class="namespace" sym-ref="4505.csnap">csnap</span>::<a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>&amp; idx, <a href="../../model/include/csnap/model/translationunit.h.html#L30" class="type struct" sym-ref="4563.TranslationUnit">TranslationUnit</a>* tu) : <span class="namespace" sym-ref="4133.libclang">libclang</span>::BasicIndexer(idx.libclangAPI()),</td></tr><tr><th id="L36">36</th><td>    <a href="indexer.cpp.html#L27" class="member field" sym-ref="5445.indexer">indexer</a>(idx),</td></tr><tr><th id="L37">37</th><td>    <a href="indexer.cpp.html#L28" class="member field" sym-ref="5446.usrs">usrs</a>(idx.<a href="indexer.cpp.html#L610" class="member memfn" sym-ref="5320.sharedUsrMap">sharedUsrMap</a>().<a href="../../model/src/usrmap.cpp.html#L51" class="member memfn" sym-ref="5224.clone">clone</a>())</td></tr><tr><th id="L38">38</th><td>  {</td></tr><tr><th id="L39">39</th><td>    <a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>.<a href="../include/csnap/indexer/indexer.h.html#L35" class="member field" sym-ref="5302.source">source</a> = tu;</td></tr><tr><th id="L40">40</th><td>  }</td></tr><tr><th id="L41">41</th><td/></tr><tr><th id="L42">42</th><td>  <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1090" class="type typedef" sym-ref="3911.CXIdxClientContainer">CXIdxClientContainer</a> <dfn class="member memfn" sym-ref="5450.startedTranslationUnit">startedTranslationUnit</dfn>()</td></tr><tr><th id="L43">43</th><td>  {</td></tr><tr><th id="L44">44</th><td>    <b>return</b> <b>nullptr</b>;</td></tr><tr><th id="L45">45</th><td>  }</td></tr><tr><th id="L46">46</th><td/></tr><tr><th id="L47">47</th><td>  <em>void</em>* <dfn class="member memfn" sym-ref="5451.enteredMainFile">enteredMainFile</dfn>(<em>const</em> <span class="namespace" sym-ref="4133.libclang">libclang</span>::<a href="../libclang-utils/include/libclang-utils/clang-file.h.html#L22" class="type cxxclass" sym-ref="4135.File">File</a>&amp; mainFile)</td></tr><tr><th id="L48">48</th><td>  {</td></tr><tr><th id="L49">49</th><td>    <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxtypealias" sym-ref="32.string">string</span> path = <span class="member constructor" sym-ref="64.basic_string<_Elem, _Traits, _Alloc>">mainFile</span>.<a href="../libclang-utils/include/libclang-utils/clang-file.h.html#L70" class="member memfn" sym-ref="5237.getFileName">getFileName</a>();</td></tr><tr><th id="L50">50</th><td>    <b>auto</b> [rawptr, owningptr] = <a href="indexer.cpp.html#L27" class="member field" sym-ref="5445.indexer">indexer</a>.getFile(path);</td></tr><tr><th id="L51">51</th><td/></tr><tr><th id="L52">52</th><td>    <i>// the file should already exist in the snapshot</i></td></tr><tr><th id="L53">53</th><td>    <span class="fn" sym-ref="69._wassert">assert</span>(owningptr <span class="fn" sym-ref="5452.operator==">==</span> <b>nullptr</b>);</td></tr><tr><th id="L54">54</th><td/></tr><tr><th id="L55">55</th><td>    <b>if</b> (<span class="member convfn" sym-ref="2416.operator bool">owningptr</span>)</td></tr><tr><th id="L56">56</th><td>    {</td></tr><tr><th id="L57">57</th><td>      rawptr = owningptr.<span class="member memfn" sym-ref="2514.get">get</span>();</td></tr><tr><th id="L58">58</th><td>      <a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>.<a href="../include/csnap/indexer/indexer.h.html#L41" class="member field" sym-ref="5304.files">files</a>.<span class="member memfn" sym-ref="1827.push_back">push_back</span>(<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="1399.move">move</span>(owningptr));</td></tr><tr><th id="L59">59</th><td>    }</td></tr><tr><th id="L60">60</th><td/></tr><tr><th id="L61">61</th><td>    <b>return</b> rawptr;</td></tr><tr><th id="L62">62</th><td>  }</td></tr><tr><th id="L63">63</th><td/></tr><tr><th id="L64">64</th><td>  <em>void</em>* <dfn class="member memfn" sym-ref="5453.ppIncludedFile">ppIncludedFile</dfn>(<em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1106" class="type typedef" sym-ref="3917.CXIdxIncludedFileInfo">CXIdxIncludedFileInfo</a>* inclFile)</td></tr><tr><th id="L65">65</th><td>  {</td></tr><tr><th id="L66">66</th><td>    <i>// ppIncludedFile() is called for every #include in the translation unit</i></td></tr><tr><th id="L67">67</th><td>    <i>// (including nested #includes).</i></td></tr><tr><th id="L68">68</th><td>    <i>// We collect the following information here:</i></td></tr><tr><th id="L69">69</th><td>    <i>// - the id of the included file (which we may need to create if we never encountered the file);</i></td></tr><tr><th id="L70">70</th><td>    <i>// - the id of the file in which the #include is located;</i></td></tr><tr><th id="L71">71</th><td>    <i>// - the line number of the #include.</i></td></tr><tr><th id="L72">72</th><td>    <i>// The id of the included file is returned by this function so that </i></td></tr><tr><th id="L73">73</th><td>    <i>// it can be attached to the file by libclang and later be retrieved using getClientData().</i></td></tr><tr><th id="L74">74</th><td>    <i>// Note that all calls to ppIncludedFile() seem to happen before any calls to </i></td></tr><tr><th id="L75">75</th><td>    <i>// indexDeclaration() or indexEntityReference() so this function cannot be used </i></td></tr><tr><th id="L76">76</th><td>    <i>// to know in which file "we currently are". </i></td></tr><tr><th id="L77">77</th><td/></tr><tr><th id="L78">78</th><td>    <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxtypealias" sym-ref="32.string">string</span> path = <a href="indexer.cpp.html#L27" class="member field" sym-ref="5445.indexer">indexer</a>.libclangAPI().file(inclFile-&gt;file).getFileName();</td></tr><tr><th id="L79">79</th><td/></tr><tr><th id="L80">80</th><td>    <b>auto</b> [rawptr, owningptr] = <span class="member constructor" sym-ref="2556.pair<_Ty1, _Ty2>">indexer</span>.getFile(path);</td></tr><tr><th id="L81">81</th><td/></tr><tr><th id="L82">82</th><td>    <b>if</b> (<span class="member convfn" sym-ref="2416.operator bool">owningptr</span>)</td></tr><tr><th id="L83">83</th><td>    {</td></tr><tr><th id="L84">84</th><td>      rawptr = owningptr.<span class="member memfn" sym-ref="2514.get">get</span>();</td></tr><tr><th id="L85">85</th><td>      <a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>.<a href="../include/csnap/indexer/indexer.h.html#L41" class="member field" sym-ref="5304.files">files</a>.<span class="member memfn" sym-ref="1827.push_back">push_back</span>(<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="1399.move">move</span>(owningptr));</td></tr><tr><th id="L86">86</th><td>    }</td></tr><tr><th id="L87">87</th><td/></tr><tr><th id="L88">88</th><td>    <b>if</b> (!rawptr)</td></tr><tr><th id="L89">89</th><td>      <b>return</b> <b>nullptr</b>; <i>// $TODO: we should find a way to log the include, for completeness</i></td></tr><tr><th id="L90">90</th><td/></tr><tr><th id="L91">91</th><td>    <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L78" class="type struct" sym-ref="5260.FileLocation">FileLocation</a> loc = <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L89" class="member memfn" sym-ref="5267.getFileLocation">getFileLocation</a>(inclFile-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1100" class="member field" sym-ref="3919.hashLoc">hashLoc</a>);</td></tr><tr><th id="L92">92</th><td/></tr><tr><th id="L93">93</th><td>    <a href="../../model/include/csnap/model/include.h.html#L16" class="type struct" sym-ref="4559.Include">Include</a> inc;</td></tr><tr><th id="L94">94</th><td>    inc.<a href="../../model/include/csnap/model/include.h.html#L26" class="member field" sym-ref="4561.included_file_id">included_file_id</a> <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> rawptr-&gt;<a href="../../model/include/csnap/model/file.h.html#L17" class="member field" sym-ref="4534.id">id</a>;</td></tr><tr><th id="L95">95</th><td>    inc.<a href="../../model/include/csnap/model/include.h.html#L31" class="member field" sym-ref="4562.line">line</a> = loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L82" class="member field" sym-ref="5263.line">line</a>;</td></tr><tr><th id="L96">96</th><td/></tr><tr><th id="L97">97</th><td>    <b>if</b> (loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L81" class="member field" sym-ref="5262.client_data">client_data</a>)</td></tr><tr><th id="L98">98</th><td>      inc.<a href="../../model/include/csnap/model/include.h.html#L21" class="member field" sym-ref="4560.file_id">file_id</a> <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> <b>reinterpret_cast</b>&lt;<a href="../../model/include/csnap/model/file.h.html#L15" class="type struct" sym-ref="4532.File">File</a>*&gt;(loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L81" class="member field" sym-ref="5262.client_data">client_data</a>)-&gt;<a href="../../model/include/csnap/model/file.h.html#L17" class="member field" sym-ref="4534.id">id</a>;</td></tr><tr><th id="L99">99</th><td/></tr><tr><th id="L100">100</th><td>    <b>if</b> (inc.<a href="../../model/include/csnap/model/include.h.html#L21" class="member field" sym-ref="4560.file_id">file_id</a>.<a href="../../model/include/csnap/model/identifier.h.html#L33" class="member memfn" sym-ref="4526.valid">valid</a>())</td></tr><tr><th id="L101">101</th><td>    {</td></tr><tr><th id="L102">102</th><td>      <a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>.<a href="../include/csnap/indexer/indexer.h.html#L46" class="member field" sym-ref="5305.includes">includes</a>.<span class="member memfn" sym-ref="1346.push_back">push_back</span>(inc);</td></tr><tr><th id="L103">103</th><td>    }</td></tr><tr><th id="L104">104</th><td>    <b>else</b></td></tr><tr><th id="L105">105</th><td>    {</td></tr><tr><th id="L106">106</th><td>      <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="variable" sym-ref="2527.cerr">cerr</span> <span class="fn" sym-ref="1750.operator<<">&lt;&lt;</span> <var>"could not get id for "</var> <span class="fn" sym-ref="1811.operator<<">&lt;&lt;</span> <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L53" class="member memfn" sym-ref="5255.libclangAPI">libclangAPI</a>().<a href="../libclang-utils/src/libclang.cpp.html#L434" class="member memfn" sym-ref="4436.file">file</a>(<a href="../libclang-utils/include/libclang-utils/clang-file.h.html#L78" class="member convfn" sym-ref="5238.operator void *">loc</a>.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L80" class="member field" sym-ref="5261.file">file</a>).<a href="../libclang-utils/include/libclang-utils/clang-file.h.html#L70" class="member memfn" sym-ref="5237.getFileName">getFileName</a>() <span class="member memfn" sym-ref="2098.operator<<">&lt;&lt;</span> <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="2099.endl">endl</span>;</td></tr><tr><th id="L107">107</th><td>    }</td></tr><tr><th id="L108">108</th><td/></tr><tr><th id="L109">109</th><td>    <b>return</b> rawptr;</td></tr><tr><th id="L110">110</th><td>  }</td></tr><tr><th id="L111">111</th><td/></tr><tr><th id="L112">112</th><td>  <em>void</em> <dfn class="member memfn" sym-ref="5454.indexDeclaration">indexDeclaration</dfn>(<em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1222" class="type typedef" sym-ref="4006.CXIdxDeclInfo">CXIdxDeclInfo</a>* decl)</td></tr><tr><th id="L113">113</th><td>  {</td></tr><tr><th id="L114">114</th><td>    <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L78" class="type struct" sym-ref="5260.FileLocation">FileLocation</a> loc = <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L89" class="member memfn" sym-ref="5267.getFileLocation">getFileLocation</a>(decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1207" class="member field" sym-ref="4010.loc">loc</a>);</td></tr><tr><th id="L115">115</th><td/></tr><tr><th id="L116">116</th><td>    <b>if</b> (!loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L81" class="member field" sym-ref="5262.client_data">client_data</a>)</td></tr><tr><th id="L117">117</th><td>    {</td></tr><tr><th id="L118">118</th><td>      <i>// the declaration belongs to a file that is skipped</i></td></tr><tr><th id="L119">119</th><td>      <b>return</b>;</td></tr><tr><th id="L120">120</th><td>    }</td></tr><tr><th id="L121">121</th><td/></tr><tr><th id="L122">122</th><td>    <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>* symbol = <a href="indexer.cpp.html#L204" class="member memfn" sym-ref="5455.get_symbol">get_symbol</a>(decl);</td></tr><tr><th id="L123">123</th><td/></tr><tr><th id="L124">124</th><td>    <b>if</b> (!symbol)</td></tr><tr><th id="L125">125</th><td>      <b>return</b>;</td></tr><tr><th id="L126">126</th><td/></tr><tr><th id="L127">127</th><td>    <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L73" class="member memfn" sym-ref="5259.setClientData">setClientData</a>(decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1214" class="member field" sym-ref="4016.declAsContainer">declAsContainer</a>, symbol);</td></tr><tr><th id="L128">128</th><td>    <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L63" class="member memfn" sym-ref="5257.setClientData">setClientData</a>(decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1205" class="member field" sym-ref="4008.entityInfo">entityInfo</a>, symbol);</td></tr><tr><th id="L129">129</th><td/></tr><tr><th id="L130">130</th><td>    <i>// It seems indexEntityReference() is not called for declaration despite the </i></td></tr><tr><th id="L131">131</th><td>    <i>// CXSymbolRole enum suggesting it could; so we create the reference manually here.</i></td></tr><tr><th id="L132">132</th><td>    <b>if</b>(loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L81" class="member field" sym-ref="5262.client_data">client_data</a>)</td></tr><tr><th id="L133">133</th><td>    {</td></tr><tr><th id="L134">134</th><td>      <a href="../../model/include/csnap/model/fileid.h.html#L15" class="type cxxtypealias" sym-ref="4533.FileId">FileId</a> fileid = <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>"><b>reinterpret_cast</b></a>&lt;<a href="../../model/include/csnap/model/file.h.html#L15" class="type struct" sym-ref="4532.File">File</a>*&gt;(loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L81" class="member field" sym-ref="5262.client_data">client_data</a>)-&gt;<a href="../../model/include/csnap/model/file.h.html#L17" class="member field" sym-ref="4534.id">id</a>;</td></tr><tr><th id="L135">135</th><td/></tr><tr><th id="L136">136</th><td>      <a href="../../model/include/csnap/model/reference.h.html#L16" class="type struct" sym-ref="4582.SymbolReference">SymbolReference</a> symref;</td></tr><tr><th id="L137">137</th><td>      symref.<a href="../../model/include/csnap/model/reference.h.html#L22" class="member field" sym-ref="4584.file_id">file_id</a> = fileid.<a href="../../model/include/csnap/model/identifier.h.html#L28" class="member memfn" sym-ref="4525.value">value</a>();</td></tr><tr><th id="L138">138</th><td>      symref.<a href="../../model/include/csnap/model/reference.h.html#L24" class="member field" sym-ref="4586.col">col</a> = loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L83" class="member field" sym-ref="5264.column">column</a>;</td></tr><tr><th id="L139">139</th><td>      symref.<a href="../../model/include/csnap/model/reference.h.html#L23" class="member field" sym-ref="4585.line">line</a> = loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L82" class="member field" sym-ref="5263.line">line</a>;</td></tr><tr><th id="L140">140</th><td>      symref.<a href="../../model/include/csnap/model/reference.h.html#L21" class="member field" sym-ref="4583.symbol_id">symbol_id</a> = symbol-&gt;<a href="../../model/include/csnap/model/symbol.h.html#L65" class="member field" sym-ref="4635.id">id</a>.<a href="../../model/include/csnap/model/identifier.h.html#L28" class="member memfn" sym-ref="4525.value">value</a>();</td></tr><tr><th id="L141">141</th><td/></tr><tr><th id="L142">142</th><td>      symref.<a href="../../model/include/csnap/model/reference.h.html#L34" class="member field" sym-ref="4588.flags">flags</a> = decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1212" class="member field" sym-ref="4014.isDefinition">isDefinition</a> ? <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1286" class="enumconstant" sym-ref="4074.CXSymbolRole_Definition">CXSymbolRole_Definition</a> : <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1285" class="enumconstant" sym-ref="4073.CXSymbolRole_Declaration">CXSymbolRole_Declaration</a>;</td></tr><tr><th id="L143">143</th><td/></tr><tr><th id="L144">144</th><td>      <b>if</b> (decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1216" class="member field" sym-ref="4017.isImplicit">isImplicit</a>)</td></tr><tr><th id="L145">145</th><td>        symref.<a href="../../model/include/csnap/model/reference.h.html#L34" class="member field" sym-ref="4588.flags">flags</a> |= <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1293" class="enumconstant" sym-ref="4081.CXSymbolRole_Implicit">CXSymbolRole_Implicit</a>;</td></tr><tr><th id="L146">146</th><td/></tr><tr><th id="L147">147</th><td>      <b>if</b> (<em>void</em>* cdata = <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L68" class="member memfn" sym-ref="5258.getClientData">getClientData</a>(decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1208" class="member field" sym-ref="4011.semanticContainer">semanticContainer</a>))</td></tr><tr><th id="L148">148</th><td>        symref.<a href="../../model/include/csnap/model/reference.h.html#L29" class="member field" sym-ref="4587.parent_symbol_id">parent_symbol_id</a> <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> <b>reinterpret_cast</b>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>*&gt;(cdata)-&gt;<a href="../../model/include/csnap/model/symbol.h.html#L65" class="member field" sym-ref="4635.id">id</a>;</td></tr><tr><th id="L149">149</th><td/></tr><tr><th id="L150">150</th><td>      <a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>.<a href="../include/csnap/indexer/indexer.h.html#L56" class="member field" sym-ref="5307.references">references</a>.<span class="member memfn" sym-ref="1346.push_back">push_back</span>(symref);</td></tr><tr><th id="L151">151</th><td>    }</td></tr><tr><th id="L152">152</th><td>  }</td></tr><tr><th id="L153">153</th><td/></tr><tr><th id="L154">154</th><td>  <em>void</em> <dfn class="member memfn" sym-ref="5456.indexEntityReference">indexEntityReference</dfn>(<em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1309" class="type typedef" sym-ref="4082.CXIdxEntityRefInfo">CXIdxEntityRefInfo</a>* ref)</td></tr><tr><th id="L155">155</th><td>  {</td></tr><tr><th id="L156">156</th><td>    <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L78" class="type struct" sym-ref="5260.FileLocation">FileLocation</a> loc = <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L89" class="member memfn" sym-ref="5267.getFileLocation">getFileLocation</a>(ref-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1300" class="member field" sym-ref="4086.loc">loc</a>);</td></tr><tr><th id="L157">157</th><td/></tr><tr><th id="L158">158</th><td>    <b>if</b> (!loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L81" class="member field" sym-ref="5262.client_data">client_data</a>)</td></tr><tr><th id="L159">159</th><td>    {</td></tr><tr><th id="L160">160</th><td>      <i>// the entity reference belongs to a file that is skipped</i></td></tr><tr><th id="L161">161</th><td>      <b>return</b>;</td></tr><tr><th id="L162">162</th><td>    }</td></tr><tr><th id="L163">163</th><td/></tr><tr><th id="L164">164</th><td>    <a href="../../model/include/csnap/model/fileid.h.html#L15" class="type cxxtypealias" sym-ref="4533.FileId">FileId</a> fileid = <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>"><b>reinterpret_cast</b></a>&lt;<a href="../../model/include/csnap/model/file.h.html#L15" class="type struct" sym-ref="4532.File">File</a>*&gt;(loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L81" class="member field" sym-ref="5262.client_data">client_data</a>)-&gt;<a href="../../model/include/csnap/model/file.h.html#L17" class="member field" sym-ref="4534.id">id</a>;</td></tr><tr><th id="L165">165</th><td/></tr><tr><th id="L166">166</th><td>    <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>* symbol = <a href="indexer.cpp.html#L260" class="member memfn" sym-ref="5457.get_symbol">get_symbol</a>(ref-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1302" class="member field" sym-ref="4087.referencedEntity">referencedEntity</a>);</td></tr><tr><th id="L167">167</th><td/></tr><tr><th id="L168">168</th><td>    <b>if</b> (!symbol)</td></tr><tr><th id="L169">169</th><td>      <b>return</b>;</td></tr><tr><th id="L170">170</th><td/></tr><tr><th id="L171">171</th><td>    <a href="../../model/include/csnap/model/reference.h.html#L16" class="type struct" sym-ref="4582.SymbolReference">SymbolReference</a> symref;</td></tr><tr><th id="L172">172</th><td>    symref.<a href="../../model/include/csnap/model/reference.h.html#L22" class="member field" sym-ref="4584.file_id">file_id</a> = fileid.<a href="../../model/include/csnap/model/identifier.h.html#L28" class="member memfn" sym-ref="4525.value">value</a>();</td></tr><tr><th id="L173">173</th><td>    symref.<a href="../../model/include/csnap/model/reference.h.html#L24" class="member field" sym-ref="4586.col">col</a> = loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L83" class="member field" sym-ref="5264.column">column</a>;</td></tr><tr><th id="L174">174</th><td>    symref.<a href="../../model/include/csnap/model/reference.h.html#L23" class="member field" sym-ref="4585.line">line</a> = loc.<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L82" class="member field" sym-ref="5263.line">line</a>;</td></tr><tr><th id="L175">175</th><td>    symref.<a href="../../model/include/csnap/model/reference.h.html#L21" class="member field" sym-ref="4583.symbol_id">symbol_id</a> = symbol-&gt;<a href="../../model/include/csnap/model/symbol.h.html#L65" class="member field" sym-ref="4635.id">id</a>.<a href="../../model/include/csnap/model/identifier.h.html#L28" class="member memfn" sym-ref="4525.value">value</a>();</td></tr><tr><th id="L176">176</th><td>    symref.<a href="../../model/include/csnap/model/reference.h.html#L34" class="member field" sym-ref="4588.flags">flags</a> = ref-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1308" class="member field" sym-ref="4090.role">role</a>;</td></tr><tr><th id="L177">177</th><td/></tr><tr><th id="L178">178</th><td>    <b>if</b> (ref-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1304" class="member field" sym-ref="4088.parentEntity">parentEntity</a>)</td></tr><tr><th id="L179">179</th><td>    {</td></tr><tr><th id="L180">180</th><td>      <b>if</b> (<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>* parent_symbol = <a href="indexer.cpp.html#L260" class="member memfn" sym-ref="5457.get_symbol">get_symbol</a>(ref-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1304" class="member field" sym-ref="4088.parentEntity">parentEntity</a>))</td></tr><tr><th id="L181">181</th><td>        symref.<a href="../../model/include/csnap/model/reference.h.html#L29" class="member field" sym-ref="4587.parent_symbol_id">parent_symbol_id</a> <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> parent_symbol-&gt;<a href="../../model/include/csnap/model/symbol.h.html#L65" class="member field" sym-ref="4635.id">id</a>;</td></tr><tr><th id="L182">182</th><td>    }</td></tr><tr><th id="L183">183</th><td/></tr><tr><th id="L184">184</th><td>    <a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>.<a href="../include/csnap/indexer/indexer.h.html#L56" class="member field" sym-ref="5307.references">references</a>.<span class="member memfn" sym-ref="1346.push_back">push_back</span>(symref);</td></tr><tr><th id="L185">185</th><td>  }</td></tr><tr><th id="L186">186</th><td/></tr><tr><th id="L187">187</th><td><b>protected</b>:</td></tr><tr><th id="L188">188</th><td/></tr><tr><th id="L189">189</th><td>  <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>* <dfn class="member memfn" sym-ref="5458.lookup_symbol">lookup_symbol</dfn>(<em>const</em> <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxtypealias" sym-ref="32.string">string</span>&amp; usr) <em>const</em></td></tr><tr><th id="L190">190</th><td>  {</td></tr><tr><th id="L191">191</th><td>    <b>auto</b> it = <a href="indexer.cpp.html#L29" class="member field" sym-ref="5447.symbols">symbols</a>.<span class="member memfn" sym-ref="2117.find">find</span>(usr);</td></tr><tr><th id="L192">192</th><td>    <b>return</b> it <span class="member memfn" sym-ref="2118.operator!=">!=</span> <a href="indexer.cpp.html#L29" class="member field" sym-ref="5447.symbols">symbols</a>.<span class="member memfn" sym-ref="2119.end">end</span>() ? it<span class="member memfn" sym-ref="2404.operator->">-</span>&gt;<span class="member field" sym-ref="2181.second">second</span>.<span class="member memfn" sym-ref="2056.get">get</span>() : <b>nullptr</b>;</td></tr><tr><th id="L193">193</th><td>  }</td></tr><tr><th id="L194">194</th><td/></tr><tr><th id="L195">195</th><td>  <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>* <dfn class="member memfn" sym-ref="5459.insert_placeholder_symbol">insert_placeholder_symbol</dfn>(<a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> id, <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxtypealias" sym-ref="32.string">string</span> usr)</td></tr><tr><th id="L196">196</th><td>  {</td></tr><tr><th id="L197">197</th><td>    <b>auto</b> symbol = <span class="member constructor" sym-ref="1328.shared_ptr<_Ty>">std</span>::make_shared&lt;Symbol&gt;();</td></tr><tr><th id="L198">198</th><td>    symbol<span class="member memfn" sym-ref="1331.operator->">-</span>&gt;<a href="../../model/include/csnap/model/symbol.h.html#L65" class="member field" sym-ref="4635.id">id</a> <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> id;</td></tr><tr><th id="L199">199</th><td>    <a href="indexer.cpp.html#L29" class="member field" sym-ref="5447.symbols">symbols</a><span class="member memfn" sym-ref="5460.operator[]">[</span>usr] <span class="member memfn" sym-ref="2164.operator=">=</span> symbol;</td></tr><tr><th id="L200">200</th><td>    symbol<span class="member memfn" sym-ref="1331.operator->">-</span>&gt;<a href="../../model/include/csnap/model/symbol.h.html#L68" class="member field" sym-ref="4638.usr">usr</a> <span class="member memfn" sym-ref="1752.operator=">=</span> <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="1399.move">move</span>(usr);</td></tr><tr><th id="L201">201</th><td>    <b>return</b> symbol.<span class="member memfn" sym-ref="2056.get">get</span>();</td></tr><tr><th id="L202">202</th><td>  }</td></tr><tr><th id="L203">203</th><td/></tr><tr><th id="L204">204</th><td>  <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>* <dfn class="member memfn" sym-ref="5455.get_symbol">get_symbol</dfn>(<em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1222" class="type typedef" sym-ref="4006.CXIdxDeclInfo">CXIdxDeclInfo</a>* decl)</td></tr><tr><th id="L205">205</th><td>  {</td></tr><tr><th id="L206">206</th><td>    <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxtypealias" sym-ref="32.string">string</span> <span class="member constructor" sym-ref="665.basic_string<_Elem, _Traits, _Alloc>">usr</span>{ decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1205" class="member field" sym-ref="4008.entityInfo">entityInfo</a>-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1183" class="member field" sym-ref="3990.USR">USR</a> };</td></tr><tr><th id="L207">207</th><td/></tr><tr><th id="L208">208</th><td>    <b>if</b> (<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>* symbol = <a href="indexer.cpp.html#L189" class="member memfn" sym-ref="5458.lookup_symbol">lookup_symbol</a>(usr))</td></tr><tr><th id="L209">209</th><td>    {</td></tr><tr><th id="L210">210</th><td>      <b>if</b> (decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1212" class="member field" sym-ref="4014.isDefinition">isDefinition</a>)</td></tr><tr><th id="L211">211</th><td>      {</td></tr><tr><th id="L212">212</th><td>        <i>// we may more accurately fill the Symbol struct here</i></td></tr><tr><th id="L213">213</th><td/></tr><tr><th id="L214">214</th><td>        <b>if</b> (decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1205" class="member field" sym-ref="4008.entityInfo">entityInfo</a>-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1179" class="member field" sym-ref="3986.kind">kind</a> == <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1136" class="enumconstant" sym-ref="3949.CXIdxEntity_CXXClass">CXIdxEntity_CXXClass</a>)</td></tr><tr><th id="L215">215</th><td>        {</td></tr><tr><th id="L216">216</th><td>          <a href="indexer.cpp.html#L438" class="member memfn" sym-ref="5461.list_bases">list_bases</a>(<a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">symbol</a>-&gt;<a href="../../model/include/csnap/model/symbol.h.html#L65" class="member field" sym-ref="4635.id">id</a>, decl);</td></tr><tr><th id="L217">217</th><td>        }</td></tr><tr><th id="L218">218</th><td/></tr><tr><th id="L219">219</th><td>        <a href="indexer.cpp.html#L360" class="member memfn" sym-ref="5462.fill_symbol">fill_symbol</a>(*symbol, <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L53" class="member memfn" sym-ref="5255.libclangAPI">libclangAPI</a>().<a href="../libclang-utils/src/libclang.cpp.html#L425" class="member memfn" sym-ref="4435.cursor">cursor</a>(decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1206" class="member field" sym-ref="4009.cursor">cursor</a>));</td></tr><tr><th id="L220">220</th><td>      }</td></tr><tr><th id="L221">221</th><td/></tr><tr><th id="L222">222</th><td>      <b>return</b> symbol;</td></tr><tr><th id="L223">223</th><td>    }</td></tr><tr><th id="L224">224</th><td/></tr><tr><th id="L225">225</th><td>    <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> id = <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">usrs</a>.find(usr);</td></tr><tr><th id="L226">226</th><td/></tr><tr><th id="L227">227</th><td>    <b>if</b> (id.<a href="../../model/include/csnap/model/identifier.h.html#L33" class="member memfn" sym-ref="4526.valid">valid</a>())</td></tr><tr><th id="L228">228</th><td>    {</td></tr><tr><th id="L229">229</th><td>      <b>return</b> <a href="indexer.cpp.html#L195" class="member memfn" sym-ref="5459.insert_placeholder_symbol">insert_placeholder_symbol</a>(<a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">id</a>, <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::move(usr));</td></tr><tr><th id="L230">230</th><td>    }</td></tr><tr><th id="L231">231</th><td/></tr><tr><th id="L232">232</th><td>    <i>// $TODO: maybe we should assign temporary ids to </i></td></tr><tr><th id="L233">233</th><td>    <i>// the symbols and then rewrite the id when aggregating </i></td></tr><tr><th id="L234">234</th><td>    <i>// the indexing results.</i></td></tr><tr><th id="L235">235</th><td>    <b>auto</b> [uid, inserted] = <a href="indexer.cpp.html#L27" class="member field" sym-ref="5445.indexer">indexer</a>.sharedUsrMap().get(usr);</td></tr><tr><th id="L236">236</th><td>    id <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> uid;</td></tr><tr><th id="L237">237</th><td>    <i>// update local "cache"</i></td></tr><tr><th id="L238">238</th><td>    <a href="indexer.cpp.html#L28" class="member field" sym-ref="5446.usrs">usrs</a>.<a href="../../model/src/usrmap.cpp.html#L43" class="member memfn" sym-ref="5221.insert">insert</a>(usr, <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">id</a>);</td></tr><tr><th id="L239">239</th><td/></tr><tr><th id="L240">240</th><td>    <b>if</b> (!inserted)</td></tr><tr><th id="L241">241</th><td>      <b>return</b> <a href="indexer.cpp.html#L195" class="member memfn" sym-ref="5459.insert_placeholder_symbol">insert_placeholder_symbol</a>(<a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">id</a>, <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::move(usr));</td></tr><tr><th id="L242">242</th><td/></tr><tr><th id="L243">243</th><td>    <i>// The SymbolId was just created, we need to create and fill the corresponding Symbol struct.</i></td></tr><tr><th id="L244">244</th><td/></tr><tr><th id="L245">245</th><td>    <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="506.shared_ptr">shared_ptr</span>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>&gt; sym = <span class="member constructor" sym-ref="1328.shared_ptr<_Ty>">create_symbol</span>(decl, id);</td></tr><tr><th id="L246">246</th><td/></tr><tr><th id="L247">247</th><td>    <b>if</b> (sym<span class="member memfn" sym-ref="1331.operator->">-</span>&gt;<a href="../../model/include/csnap/model/symbol.h.html#L66" class="member field" sym-ref="4636.kind">kind</a> == <a href="../../model/include/csnap/model/symbol.h.html#L30" class="type enum" sym-ref="4606.Whatsit">Whatsit</a>::<a href="../../model/include/csnap/model/symbol.h.html#L48" class="enumconstant" sym-ref="4623.CXXClass">CXXClass</a>)</td></tr><tr><th id="L248">248</th><td>    {</td></tr><tr><th id="L249">249</th><td>      <a href="indexer.cpp.html#L466" class="member memfn" sym-ref="5464.list_bases">list_bases</a>(<span class="member memfn" sym-ref="2047.operator*">*</span>sym, decl);</td></tr><tr><th id="L250">250</th><td>    }</td></tr><tr><th id="L251">251</th><td/></tr><tr><th id="L252">252</th><td>    <a href="indexer.cpp.html#L360" class="member memfn" sym-ref="5462.fill_symbol">fill_symbol</a>(<span class="member memfn" sym-ref="2047.operator*">*</span>sym, <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L53" class="member memfn" sym-ref="5255.libclangAPI">libclangAPI</a>().<a href="../libclang-utils/src/libclang.cpp.html#L425" class="member memfn" sym-ref="4435.cursor">cursor</a>(decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1206" class="member field" sym-ref="4009.cursor">cursor</a>));</td></tr><tr><th id="L253">253</th><td/></tr><tr><th id="L254">254</th><td>    <a href="indexer.cpp.html#L29" class="member field" sym-ref="5447.symbols">symbols</a><span class="member memfn" sym-ref="5460.operator[]">[</span>usr] <span class="member memfn" sym-ref="2164.operator=">=</span> sym;</td></tr><tr><th id="L255">255</th><td>    <a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>.<a href="../include/csnap/indexer/indexer.h.html#L51" class="member field" sym-ref="5306.symbols">symbols</a>.<span class="member memfn" sym-ref="1346.push_back">push_back</span>(sym);</td></tr><tr><th id="L256">256</th><td/></tr><tr><th id="L257">257</th><td>    <b>return</b> sym.<span class="member memfn" sym-ref="2056.get">get</span>();</td></tr><tr><th id="L258">258</th><td>  }</td></tr><tr><th id="L259">259</th><td/></tr><tr><th id="L260">260</th><td>  <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>* <dfn class="member memfn" sym-ref="5457.get_symbol">get_symbol</dfn>(<em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1187" class="type typedef" sym-ref="3984.CXIdxEntityInfo">CXIdxEntityInfo</a>* info)</td></tr><tr><th id="L261">261</th><td>  {</td></tr><tr><th id="L262">262</th><td>    <b>if</b> (<em>void</em>* cdata = <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L58" class="member memfn" sym-ref="5256.getClientData">getClientData</a>(info))</td></tr><tr><th id="L263">263</th><td>      <b>return</b> <b>reinterpret_cast</b>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>*&gt;(cdata);</td></tr><tr><th id="L264">264</th><td/></tr><tr><th id="L265">265</th><td>    <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxtypealias" sym-ref="32.string">string</span> <span class="member constructor" sym-ref="665.basic_string<_Elem, _Traits, _Alloc>">usr</span>{ info-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1183" class="member field" sym-ref="3990.USR">USR</a> };</td></tr><tr><th id="L266">266</th><td/></tr><tr><th id="L267">267</th><td>    <b>if</b> (<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>* symbol = <a href="indexer.cpp.html#L189" class="member memfn" sym-ref="5458.lookup_symbol">lookup_symbol</a>(usr))</td></tr><tr><th id="L268">268</th><td>      <b>return</b> symbol;</td></tr><tr><th id="L269">269</th><td/></tr><tr><th id="L270">270</th><td>    <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> id = <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">usrs</a>.find(usr);</td></tr><tr><th id="L271">271</th><td/></tr><tr><th id="L272">272</th><td>    <b>if</b> (id.<a href="../../model/include/csnap/model/identifier.h.html#L33" class="member memfn" sym-ref="4526.valid">valid</a>())</td></tr><tr><th id="L273">273</th><td>      <b>return</b> <a href="indexer.cpp.html#L195" class="member memfn" sym-ref="5459.insert_placeholder_symbol">insert_placeholder_symbol</a>(<a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">id</a>, <span class="member constructor" sym-ref="64.basic_string<_Elem, _Traits, _Alloc>">std</span>::move(usr));</td></tr><tr><th id="L274">274</th><td/></tr><tr><th id="L275">275</th><td>    <b>auto</b> [uid, inserted] = <span class="member constructor" sym-ref="2556.pair<_Ty1, _Ty2>">indexer</span>.sharedUsrMap().get(usr);</td></tr><tr><th id="L276">276</th><td>    id <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> uid;</td></tr><tr><th id="L277">277</th><td>    <i>// update local "cache"</i></td></tr><tr><th id="L278">278</th><td>    <a href="indexer.cpp.html#L28" class="member field" sym-ref="5446.usrs">usrs</a>.<a href="../../model/src/usrmap.cpp.html#L43" class="member memfn" sym-ref="5221.insert">insert</a>(usr, <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">id</a>);</td></tr><tr><th id="L279">279</th><td/></tr><tr><th id="L280">280</th><td>    <b>if</b> (!inserted)</td></tr><tr><th id="L281">281</th><td>      <b>return</b> <a href="indexer.cpp.html#L195" class="member memfn" sym-ref="5459.insert_placeholder_symbol">insert_placeholder_symbol</a>(<a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">id</a>, <span class="member constructor" sym-ref="64.basic_string<_Elem, _Traits, _Alloc>">std</span>::move(usr));</td></tr><tr><th id="L282">282</th><td/></tr><tr><th id="L283">283</th><td>    <i>// The SymbolId was just created, we need to create and fill the corresponding Symbol struct.</i></td></tr><tr><th id="L284">284</th><td/></tr><tr><th id="L285">285</th><td>    <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="506.shared_ptr">shared_ptr</span>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>&gt; sym = <a href="indexer.cpp.html#L419" class="member memfn" sym-ref="5465.create_symbol">create_symbol</a>(info, id);</td></tr><tr><th id="L286">286</th><td/></tr><tr><th id="L287">287</th><td>    <a href="indexer.cpp.html#L29" class="member field" sym-ref="5447.symbols">symbols</a><span class="member memfn" sym-ref="5460.operator[]">[</span>usr] <span class="member memfn" sym-ref="2164.operator=">=</span> sym;</td></tr><tr><th id="L288">288</th><td>    <a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>.<a href="../include/csnap/indexer/indexer.h.html#L51" class="member field" sym-ref="5306.symbols">symbols</a>.<span class="member memfn" sym-ref="1346.push_back">push_back</span>(sym);</td></tr><tr><th id="L289">289</th><td/></tr><tr><th id="L290">290</th><td>    <b>return</b> sym.<span class="member memfn" sym-ref="2056.get">get</span>();</td></tr><tr><th id="L291">291</th><td>  }</td></tr><tr><th id="L292">292</th><td/></tr><tr><th id="L293">293</th><td><b>private</b>:</td></tr><tr><th id="L294">294</th><td/></tr><tr><th id="L295">295</th><td>  <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> <dfn class="member memfn" sym-ref="5466.get_symbol_id">get_symbol_id</dfn>(<em>const</em> <span class="namespace" sym-ref="4133.libclang">libclang</span>::<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L31" class="type cxxclass" sym-ref="4134.Cursor">Cursor</a>&amp; cursor)</td></tr><tr><th id="L296">296</th><td>  {</td></tr><tr><th id="L297">297</th><td>    <b>if</b> (cursor.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L136" class="member memfn" sym-ref="5390.isNull">isNull</a>())</td></tr><tr><th id="L298">298</th><td>      <b>return</b> <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a>();</td></tr><tr><th id="L299">299</th><td/></tr><tr><th id="L300">300</th><td>    <b>static</b> <em>const</em> <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="1316.map">map</span>&lt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L297" class="type enum" sym-ref="3194.CXCursorKind">CXCursorKind</a>, <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1148" class="type typedef" sym-ref="3931.CXIdxEntityKind">CXIdxEntityKind</a>&gt; dict = <span class="member constructor" sym-ref="5467.map<_Kty, _Ty, _Pr, _Alloc>">{</span></td></tr><tr><th id="L301">301</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L317" class="enumconstant" sym-ref="3214.CXCursor_TypedefDecl">CXCursor_TypedefDecl</a>,        <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1117" class="enumconstant" sym-ref="3934.CXIdxEntity_Typedef">CXIdxEntity_Typedef</a> },</td></tr><tr><th id="L302">302</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L305" class="enumconstant" sym-ref="3202.CXCursor_FunctionDecl">CXCursor_FunctionDecl</a>,       <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1118" class="enumconstant" sym-ref="3935.CXIdxEntity_Function">CXIdxEntity_Function</a> },</td></tr><tr><th id="L303">303</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L306" class="enumconstant" sym-ref="3203.CXCursor_VarDecl">CXCursor_VarDecl</a>,            <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1119" class="enumconstant" sym-ref="3936.CXIdxEntity_Variable">CXIdxEntity_Variable</a> },</td></tr><tr><th id="L304">304</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L304" class="enumconstant" sym-ref="3201.CXCursor_EnumConstantDecl">CXCursor_EnumConstantDecl</a>,   <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1121" class="enumconstant" sym-ref="3938.CXIdxEntity_EnumConstant">CXIdxEntity_EnumConstant</a> },</td></tr><tr><th id="L305">305</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L302" class="enumconstant" sym-ref="3199.CXCursor_EnumDecl">CXCursor_EnumDecl</a>,           <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1132" class="enumconstant" sym-ref="3946.CXIdxEntity_Enum">CXIdxEntity_Enum</a> },</td></tr><tr><th id="L306">306</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L299" class="enumconstant" sym-ref="3196.CXCursor_StructDecl">CXCursor_StructDecl</a>,         <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1133" class="enumconstant" sym-ref="3947.CXIdxEntity_Struct">CXIdxEntity_Struct</a> },</td></tr><tr><th id="L307">307</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L300" class="enumconstant" sym-ref="3197.CXCursor_UnionDecl">CXCursor_UnionDecl</a>,          <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1134" class="enumconstant" sym-ref="3948.CXIdxEntity_Union">CXIdxEntity_Union</a> },</td></tr><tr><th id="L308">308</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L301" class="enumconstant" sym-ref="3198.CXCursor_ClassDecl">CXCursor_ClassDecl</a>,          <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1136" class="enumconstant" sym-ref="3949.CXIdxEntity_CXXClass">CXIdxEntity_CXXClass</a> },</td></tr><tr><th id="L309">309</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L319" class="enumconstant" sym-ref="3216.CXCursor_Namespace">CXCursor_Namespace</a>,          <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1137" class="enumconstant" sym-ref="3950.CXIdxEntity_CXXNamespace">CXIdxEntity_CXXNamespace</a> },</td></tr><tr><th id="L310">310</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L330" class="enumconstant" sym-ref="3227.CXCursor_NamespaceAlias">CXCursor_NamespaceAlias</a>,     <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1138" class="enumconstant" sym-ref="3951.CXIdxEntity_CXXNamespaceAlias">CXIdxEntity_CXXNamespaceAlias</a> },</td></tr><tr><th id="L311">311</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L321" class="enumconstant" sym-ref="3218.CXCursor_Constructor">CXCursor_Constructor</a>,        <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1142" class="enumconstant" sym-ref="3955.CXIdxEntity_CXXConstructor">CXIdxEntity_CXXConstructor</a> },</td></tr><tr><th id="L312">312</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L322" class="enumconstant" sym-ref="3219.CXCursor_Destructor">CXCursor_Destructor</a>,         <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1143" class="enumconstant" sym-ref="3956.CXIdxEntity_CXXDestructor">CXIdxEntity_CXXDestructor</a> },</td></tr><tr><th id="L313">313</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L323" class="enumconstant" sym-ref="3220.CXCursor_ConversionFunction">CXCursor_ConversionFunction</a>, <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1144" class="enumconstant" sym-ref="3957.CXIdxEntity_CXXConversionFunction">CXIdxEntity_CXXConversionFunction</a> },</td></tr><tr><th id="L314">314</th><td>      <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L333" class="enumconstant" sym-ref="3230.CXCursor_TypeAliasDecl">CXCursor_TypeAliasDecl</a>,      <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1145" class="enumconstant" sym-ref="3958.CXIdxEntity_CXXTypeAlias">CXIdxEntity_CXXTypeAlias</a> },</td></tr><tr><th id="L315">315</th><td>    };</td></tr><tr><th id="L316">316</th><td/></tr><tr><th id="L317">317</th><td>    <b>auto</b> it = dict.<span class="member memfn" sym-ref="2117.find">find</span>(cursor.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L144" class="member memfn" sym-ref="5391.kind">kind</a>());</td></tr><tr><th id="L318">318</th><td/></tr><tr><th id="L319">319</th><td>    <b>if</b> (it <span class="member memfn" sym-ref="2250.operator==">==</span> dict.<span class="member memfn" sym-ref="2119.end">end</span>())</td></tr><tr><th id="L320">320</th><td>      <b>return</b> <a href="../../model/include/csnap/model/identifier.h.html#L18" class="member constructor" sym-ref="4521.Identifier<T>">SymbolId</a>();</td></tr><tr><th id="L321">321</th><td/></tr><tr><th id="L322">322</th><td>    <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxtypealias" sym-ref="32.string">string</span> <span class="member constructor" sym-ref="64.basic_string<_Elem, _Traits, _Alloc>">usr</span>{ cursor.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L235" class="member memfn" sym-ref="5401.getUSR">getUSR</a>() };</td></tr><tr><th id="L323">323</th><td/></tr><tr><th id="L324">324</th><td>    <b>if</b> (usr.<span class="member memfn" sym-ref="1751.empty">empty</span>())</td></tr><tr><th id="L325">325</th><td>      <b>return</b> <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">SymbolId</a>();</td></tr><tr><th id="L326">326</th><td/></tr><tr><th id="L327">327</th><td>    <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> id = <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">usrs</a>.find(usr);</td></tr><tr><th id="L328">328</th><td/></tr><tr><th id="L329">329</th><td>    <b>if</b> (id.<a href="../../model/include/csnap/model/identifier.h.html#L33" class="member memfn" sym-ref="4526.valid">valid</a>())</td></tr><tr><th id="L330">330</th><td>      <b>return</b> <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">id</a>;</td></tr><tr><th id="L331">331</th><td/></tr><tr><th id="L332">332</th><td>    <b>auto</b> [uid, inserted] = <a href="indexer.cpp.html#L27" class="member field" sym-ref="5445.indexer">indexer</a>.sharedUsrMap().get(usr);</td></tr><tr><th id="L333">333</th><td>    id <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> uid;</td></tr><tr><th id="L334">334</th><td>    <i>// update local "cache"</i></td></tr><tr><th id="L335">335</th><td>    <a href="indexer.cpp.html#L28" class="member field" sym-ref="5446.usrs">usrs</a>.<a href="../../model/src/usrmap.cpp.html#L43" class="member memfn" sym-ref="5221.insert">insert</a>(usr, <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">id</a>);</td></tr><tr><th id="L336">336</th><td/></tr><tr><th id="L337">337</th><td>    <b>if</b> (!inserted)</td></tr><tr><th id="L338">338</th><td>      <b>return</b> <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">id</a>;</td></tr><tr><th id="L339">339</th><td/></tr><tr><th id="L340">340</th><td>    <i>// create symbol</i></td></tr><tr><th id="L341">341</th><td>    <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="506.shared_ptr">shared_ptr</span>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>&gt; sym = <span class="member constructor" sym-ref="1328.shared_ptr<_Ty>">create_symbol</span>(cursor, id, <b>static_cast</b>&lt;Whatsit&gt;(it-&gt;second));</td></tr><tr><th id="L342">342</th><td>    <a href="indexer.cpp.html#L29" class="member field" sym-ref="5447.symbols">symbols</a><span class="member memfn" sym-ref="5460.operator[]">[</span>usr] <span class="member memfn" sym-ref="2164.operator=">=</span> sym;</td></tr><tr><th id="L343">343</th><td>    <a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>.<a href="../include/csnap/indexer/indexer.h.html#L51" class="member field" sym-ref="5306.symbols">symbols</a>.<span class="member memfn" sym-ref="1346.push_back">push_back</span>(sym);</td></tr><tr><th id="L344">344</th><td/></tr><tr><th id="L345">345</th><td>    <b>return</b> <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">id</a>;</td></tr><tr><th id="L346">346</th><td>  }</td></tr><tr><th id="L347">347</th><td/></tr><tr><th id="L348">348</th><td>  <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> <dfn class="member memfn" sym-ref="5470.get_parent_symbol_id">get_parent_symbol_id</dfn>(<em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1187" class="type typedef" sym-ref="3984.CXIdxEntityInfo">CXIdxEntityInfo</a>* info)</td></tr><tr><th id="L349">349</th><td>  {</td></tr><tr><th id="L350">350</th><td>    <span class="namespace" sym-ref="4133.libclang">libclang</span>::<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L31" class="type cxxclass" sym-ref="4134.Cursor">Cursor</a> c = <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L53" class="member memfn" sym-ref="5255.libclangAPI">libclangAPI</a>().cursor(info-&gt;cursor);</td></tr><tr><th id="L351">351</th><td>    c <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L55" class="member memfn" sym-ref="5388.operator=">=</a> c.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L275" class="member memfn" sym-ref="5405.getSemanticParent">getSemanticParent</a>();</td></tr><tr><th id="L352">352</th><td>    <b>return</b> <a href="indexer.cpp.html#L295" class="member memfn" sym-ref="5466.get_symbol_id">get_symbol_id</a>(c);</td></tr><tr><th id="L353">353</th><td>  }</td></tr><tr><th id="L354">354</th><td/></tr><tr><th id="L355">355</th><td>  <em>const</em> <em>char</em>* <dfn class="member memfn" sym-ref="5471.name">name</dfn>(<em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1187" class="type typedef" sym-ref="3984.CXIdxEntityInfo">CXIdxEntityInfo</a>* entity)</td></tr><tr><th id="L356">356</th><td>  {</td></tr><tr><th id="L357">357</th><td>    <b>return</b> entity-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1182" class="member field" sym-ref="3989.name">name</a> != <b>nullptr</b> ? entity-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1182" class="member field" sym-ref="3989.name">name</a> : <var>""</var>;</td></tr><tr><th id="L358">358</th><td>  }</td></tr><tr><th id="L359">359</th><td/></tr><tr><th id="L360">360</th><td>  <em>void</em> <dfn class="member memfn" sym-ref="5462.fill_symbol">fill_symbol</dfn>(<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>&amp; s, <em>const</em> <span class="namespace" sym-ref="4133.libclang">libclang</span>::<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L31" class="type cxxclass" sym-ref="4134.Cursor">Cursor</a>&amp; c)</td></tr><tr><th id="L361">361</th><td>  {</td></tr><tr><th id="L362">362</th><td>    <b>switch</b> (c.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L144" class="member memfn" sym-ref="5391.kind">kind</a>())</td></tr><tr><th id="L363">363</th><td>    {</td></tr><tr><th id="L364">364</th><td>    <b>case</b> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L302" class="enumconstant" sym-ref="3199.CXCursor_EnumDecl">CXCursor_EnumDecl</a>:</td></tr><tr><th id="L365">365</th><td>    {</td></tr><tr><th id="L366">366</th><td>      <span class="namespace" sym-ref="4505.csnap">csnap</span>::<a href="../../model/include/csnap/model/symbol.h.html#L112" class="fn" sym-ref="4666.set_flag">set_flag</a>(s, <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>::<a href="../../model/include/csnap/model/symbol.h.html#L82" class="enumconstant" sym-ref="4650.IsScoped">IsScoped</a>, c.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L402" class="member memfn" sym-ref="5420.EnumDecl_isScoped">EnumDecl_isScoped</a>());</td></tr><tr><th id="L367">367</th><td>    }</td></tr><tr><th id="L368">368</th><td>    <b>break</b>;</td></tr><tr><th id="L369">369</th><td>    <b>case</b> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L318" class="enumconstant" sym-ref="3215.CXCursor_CXXMethod">CXCursor_CXXMethod</a>:</td></tr><tr><th id="L370">370</th><td>    <b>case</b> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L321" class="enumconstant" sym-ref="3218.CXCursor_Constructor">CXCursor_Constructor</a>:</td></tr><tr><th id="L371">371</th><td>    <b>case</b> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L322" class="enumconstant" sym-ref="3219.CXCursor_Destructor">CXCursor_Destructor</a>:</td></tr><tr><th id="L372">372</th><td>    {</td></tr><tr><th id="L373">373</th><td>      <span class="namespace" sym-ref="4505.csnap">csnap</span>::<a href="../../model/include/csnap/model/symbol.h.html#L112" class="fn" sym-ref="4666.set_flag">set_flag</a>(s, <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>::<a href="../../model/include/csnap/model/symbol.h.html#L92" class="enumconstant" sym-ref="4660.Default">Default</a>, c.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L411" class="member memfn" sym-ref="5421.CXXMethod_isDefaulted">CXXMethod_isDefaulted</a>());</td></tr><tr><th id="L374">374</th><td>      <span class="namespace" sym-ref="4505.csnap">csnap</span>::<a href="../../model/include/csnap/model/symbol.h.html#L112" class="fn" sym-ref="4666.set_flag">set_flag</a>(s, <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>::<a href="../../model/include/csnap/model/symbol.h.html#L88" class="enumconstant" sym-ref="4656.Const">Const</a>, c.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L420" class="member memfn" sym-ref="5422.CXXMethod_isConst">CXXMethod_isConst</a>());</td></tr><tr><th id="L375">375</th><td>      <span class="namespace" sym-ref="4505.csnap">csnap</span>::<a href="../../model/include/csnap/model/symbol.h.html#L112" class="fn" sym-ref="4666.set_flag">set_flag</a>(s, <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>::<a href="../../model/include/csnap/model/symbol.h.html#L80" class="enumconstant" sym-ref="4648.Static">Static</a>, c.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L429" class="member memfn" sym-ref="5423.CXXMethod_isStatic">CXXMethod_isStatic</a>());</td></tr><tr><th id="L376">376</th><td>      <span class="namespace" sym-ref="4505.csnap">csnap</span>::<a href="../../model/include/csnap/model/symbol.h.html#L112" class="fn" sym-ref="4666.set_flag">set_flag</a>(s, <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>::<a href="../../model/include/csnap/model/symbol.h.html#L85" class="enumconstant" sym-ref="4653.Virtual">Virtual</a>, c.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L438" class="member memfn" sym-ref="5424.CXXMethod_isVirtual">CXXMethod_isVirtual</a>());</td></tr><tr><th id="L377">377</th><td>      <span class="namespace" sym-ref="4505.csnap">csnap</span>::<a href="../../model/include/csnap/model/symbol.h.html#L112" class="fn" sym-ref="4666.set_flag">set_flag</a>(s, <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>::<a href="../../model/include/csnap/model/symbol.h.html#L89" class="enumconstant" sym-ref="4657.Pure">Pure</a>, c.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L447" class="member memfn" sym-ref="5425.CXXMethod_isPureVirtual">CXXMethod_isPureVirtual</a>());</td></tr><tr><th id="L378">378</th><td>    }</td></tr><tr><th id="L379">379</th><td>    <b>default</b>:</td></tr><tr><th id="L380">380</th><td>      <b>break</b>;</td></tr><tr><th id="L381">381</th><td>    }</td></tr><tr><th id="L382">382</th><td/></tr><tr><th id="L383">383</th><td>  }</td></tr><tr><th id="L384">384</th><td/></tr><tr><th id="L385">385</th><td>  <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="506.shared_ptr">shared_ptr</span>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>&gt; <dfn class="member memfn" sym-ref="5472.create_symbol">create_symbol</dfn>(<em>const</em> <span class="namespace" sym-ref="4133.libclang">libclang</span>::<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L31" class="type cxxclass" sym-ref="4134.Cursor">Cursor</a>&amp; cursor, <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> id, <a href="../../model/include/csnap/model/symbol.h.html#L30" class="type enum" sym-ref="4606.Whatsit">Whatsit</a> what, <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> parent_id)</td></tr><tr><th id="L386">386</th><td>  {</td></tr><tr><th id="L387">387</th><td>    <b>auto</b> s = <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::make_unique&lt;Symbol&gt;(what, cursor.getSpelling());</td></tr><tr><th id="L388">388</th><td>    s<span class="member memfn" sym-ref="2124.operator->">-</span>&gt;<a href="../../model/include/csnap/model/symbol.h.html#L69" class="member field" sym-ref="4639.display_name">display_name</a> <span class="member memfn" sym-ref="1752.operator=">=</span> cursor.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L257" class="member memfn" sym-ref="5403.getDisplayName">getDisplayName</a>();</td></tr><tr><th id="L389">389</th><td>    s<span class="member memfn" sym-ref="2124.operator->">-</span>&gt;<a href="../../model/include/csnap/model/symbol.h.html#L68" class="member field" sym-ref="4638.usr">usr</a> <span class="member memfn" sym-ref="1752.operator=">=</span> cursor.<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L235" class="member memfn" sym-ref="5401.getUSR">getUSR</a>();</td></tr><tr><th id="L390">390</th><td/></tr><tr><th id="L391">391</th><td>    <a href="indexer.cpp.html#L360" class="member memfn" sym-ref="5462.fill_symbol">fill_symbol</a>(<span class="member memfn" sym-ref="2183.operator*">*</span>s, cursor);</td></tr><tr><th id="L392">392</th><td/></tr><tr><th id="L393">393</th><td>    s<span class="member memfn" sym-ref="2124.operator->">-</span>&gt;<a href="../../model/include/csnap/model/symbol.h.html#L65" class="member field" sym-ref="4635.id">id</a> <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> id;</td></tr><tr><th id="L394">394</th><td>    s<span class="member memfn" sym-ref="2124.operator->">-</span>&gt;<a href="../../model/include/csnap/model/symbol.h.html#L70" class="member field" sym-ref="4640.parent_id">parent_id</a> <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> parent_id;</td></tr><tr><th id="L395">395</th><td/></tr><tr><th id="L396">396</th><td>    <span class="member constructor" sym-ref="1328.shared_ptr<_Ty>"><b>return</b></span> <span class="member constructor" sym-ref="5473.shared_ptr<_Ty>">s</span>;</td></tr><tr><th id="L397">397</th><td>  }</td></tr><tr><th id="L398">398</th><td/></tr><tr><th id="L399">399</th><td>  <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="506.shared_ptr">shared_ptr</span>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>&gt; <dfn class="member memfn" sym-ref="5469.create_symbol">create_symbol</dfn>(<em>const</em> <span class="namespace" sym-ref="4133.libclang">libclang</span>::<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L31" class="type cxxclass" sym-ref="4134.Cursor">Cursor</a>&amp; cursor, <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> id, <a href="../../model/include/csnap/model/symbol.h.html#L30" class="type enum" sym-ref="4606.Whatsit">Whatsit</a> what)</td></tr><tr><th id="L400">400</th><td>  {</td></tr><tr><th id="L401">401</th><td>    <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> parent_id = <a href="indexer.cpp.html#L295" class="member memfn" sym-ref="5466.get_symbol_id">get_symbol_id</a>(cursor.getSemanticParent());</td></tr><tr><th id="L402">402</th><td>    <b>return</b> <span class="member constructor" sym-ref="1328.shared_ptr<_Ty>">create_symbol</span>(cursor, id, what, parent_id);</td></tr><tr><th id="L403">403</th><td>  }</td></tr><tr><th id="L404">404</th><td/></tr><tr><th id="L405">405</th><td>  <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="506.shared_ptr">shared_ptr</span>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>&gt; <dfn class="member memfn" sym-ref="5474.create_symbol">create_symbol</dfn>(<em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1187" class="type typedef" sym-ref="3984.CXIdxEntityInfo">CXIdxEntityInfo</a>* info, <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> id, <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> parent_id)</td></tr><tr><th id="L406">406</th><td>  {</td></tr><tr><th id="L407">407</th><td>    <b>auto</b> s = <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::make_unique&lt;Symbol&gt;(<b>static_cast</b>&lt;Whatsit&gt;(info-&gt;kind), name(info));</td></tr><tr><th id="L408">408</th><td>    s<span class="member memfn" sym-ref="2124.operator->">-</span>&gt;<a href="../../model/include/csnap/model/symbol.h.html#L69" class="member field" sym-ref="4639.display_name">display_name</a> <span class="member memfn" sym-ref="1752.operator=">=</span> <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L53" class="member memfn" sym-ref="5255.libclangAPI">libclangAPI</a>().<a href="../libclang-utils/src/libclang.cpp.html#L425" class="member memfn" sym-ref="4435.cursor">cursor</a>(info-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1184" class="member field" sym-ref="3991.cursor">cursor</a>).<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L257" class="member memfn" sym-ref="5403.getDisplayName">getDisplayName</a>();</td></tr><tr><th id="L409">409</th><td>    s<span class="member memfn" sym-ref="2124.operator->">-</span>&gt;<a href="../../model/include/csnap/model/symbol.h.html#L68" class="member field" sym-ref="4638.usr">usr</a> <span class="member memfn" sym-ref="1841.operator=">=</span> info-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1183" class="member field" sym-ref="3990.USR">USR</a>;</td></tr><tr><th id="L410">410</th><td/></tr><tr><th id="L411">411</th><td>    s<span class="member memfn" sym-ref="2124.operator->">-</span>&gt;<a href="../../model/include/csnap/model/symbol.h.html#L65" class="member field" sym-ref="4635.id">id</a> <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> id;</td></tr><tr><th id="L412">412</th><td>    s<span class="member memfn" sym-ref="2124.operator->">-</span>&gt;<a href="../../model/include/csnap/model/symbol.h.html#L70" class="member field" sym-ref="4640.parent_id">parent_id</a> <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> parent_id;</td></tr><tr><th id="L413">413</th><td/></tr><tr><th id="L414">414</th><td>    <a href="indexer.cpp.html#L360" class="member memfn" sym-ref="5462.fill_symbol">fill_symbol</a>(<span class="member memfn" sym-ref="2183.operator*">*</span>s, <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L53" class="member memfn" sym-ref="5255.libclangAPI">libclangAPI</a>().<a href="../libclang-utils/src/libclang.cpp.html#L425" class="member memfn" sym-ref="4435.cursor">cursor</a>(info-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1184" class="member field" sym-ref="3991.cursor">cursor</a>));</td></tr><tr><th id="L415">415</th><td/></tr><tr><th id="L416">416</th><td>    <span class="member constructor" sym-ref="1328.shared_ptr<_Ty>"><b>return</b></span> <span class="member constructor" sym-ref="5473.shared_ptr<_Ty>">s</span>;</td></tr><tr><th id="L417">417</th><td>  }</td></tr><tr><th id="L418">418</th><td/></tr><tr><th id="L419">419</th><td>  <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="506.shared_ptr">shared_ptr</span>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>&gt; <dfn class="member memfn" sym-ref="5465.create_symbol">create_symbol</dfn>(<em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1187" class="type typedef" sym-ref="3984.CXIdxEntityInfo">CXIdxEntityInfo</a>* info, <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> id)</td></tr><tr><th id="L420">420</th><td>  {</td></tr><tr><th id="L421">421</th><td>    <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> parent_id = <a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">get_parent_symbol_id</a>(info);</td></tr><tr><th id="L422">422</th><td>    <b>return</b> <a href="indexer.cpp.html#L405" class="member memfn" sym-ref="5474.create_symbol">create_symbol</a>(info, id, parent_id);</td></tr><tr><th id="L423">423</th><td>  }</td></tr><tr><th id="L424">424</th><td/></tr><tr><th id="L425">425</th><td>  <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="506.shared_ptr">shared_ptr</span>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>&gt; <dfn class="member memfn" sym-ref="5463.create_symbol">create_symbol</dfn>(<em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1222" class="type typedef" sym-ref="4006.CXIdxDeclInfo">CXIdxDeclInfo</a>* decl, <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> id)</td></tr><tr><th id="L426">426</th><td>  {</td></tr><tr><th id="L427">427</th><td>    <a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> <a href="../../model/include/csnap/model/identifier.h.html#L18" class="member constructor" sym-ref="4521.Identifier<T>">parent_id</a>;</td></tr><tr><th id="L428">428</th><td/></tr><tr><th id="L429">429</th><td>    <b>if</b> (<em>void</em>* cdata = <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L68" class="member memfn" sym-ref="5258.getClientData">getClientData</a>(decl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1208" class="member field" sym-ref="4011.semanticContainer">semanticContainer</a>))</td></tr><tr><th id="L430">430</th><td>      parent_id <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> <b>reinterpret_cast</b>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>*&gt;(cdata)-&gt;<a href="../../model/include/csnap/model/symbol.h.html#L65" class="member field" sym-ref="4635.id">id</a>;</td></tr><tr><th id="L431">431</th><td/></tr><tr><th id="L432">432</th><td>    <b>if</b> (parent_id.<a href="../../model/include/csnap/model/identifier.h.html#L33" class="member memfn" sym-ref="4526.valid">valid</a>())</td></tr><tr><th id="L433">433</th><td>      <b>return</b> <a href="indexer.cpp.html#L405" class="member memfn" sym-ref="5474.create_symbol">create_symbol</a>(decl-&gt;entityInfo, id, parent_id);</td></tr><tr><th id="L434">434</th><td>    <b>else</b></td></tr><tr><th id="L435">435</th><td>      <b>return</b> <a href="indexer.cpp.html#L419" class="member memfn" sym-ref="5465.create_symbol">create_symbol</a>(decl-&gt;entityInfo, id);</td></tr><tr><th id="L436">436</th><td>  }</td></tr><tr><th id="L437">437</th><td/></tr><tr><th id="L438">438</th><td>  <em>void</em> <dfn class="member memfn" sym-ref="5461.list_bases">list_bases</dfn>(<a href="../../model/include/csnap/model/symbolid.h.html#L15" class="type cxxtypealias" sym-ref="4581.SymbolId">SymbolId</a> symbol_id, <em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1222" class="type typedef" sym-ref="4006.CXIdxDeclInfo">CXIdxDeclInfo</a>* decl)</td></tr><tr><th id="L439">439</th><td>  {</td></tr><tr><th id="L440">440</th><td>    <em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1276" class="type typedef" sym-ref="4061.CXIdxCXXClassDeclInfo">CXIdxCXXClassDeclInfo</a>* classdecl = <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L104" class="member memfn" sym-ref="5268.getCXXClassDeclInfo">getCXXClassDeclInfo</a>(decl);</td></tr><tr><th id="L441">441</th><td/></tr><tr><th id="L442">442</th><td>    <b>if</b> (!classdecl)</td></tr><tr><th id="L443">443</th><td>      <b>return</b>;</td></tr><tr><th id="L444">444</th><td/></tr><tr><th id="L445">445</th><td>    <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="45.vector">vector</span>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L153" class="type struct" sym-ref="4669.BaseClass">BaseClass</a>&gt; <span class="member constructor" sym-ref="2095.vector<_Ty, _Alloc>">bases</span>;</td></tr><tr><th id="L446">446</th><td/></tr><tr><th id="L447">447</th><td>    <b>for</b> (<b>unsigned</b> <em>int</em> i(<var>0</var>); i &lt; classdecl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1275" class="member field" sym-ref="4065.numBases">numBases</a>; ++i)</td></tr><tr><th id="L448">448</th><td>    {</td></tr><tr><th id="L449">449</th><td>      <em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1239" class="type typedef" sym-ref="4030.CXIdxBaseClassInfo">CXIdxBaseClassInfo</a>* base = classdecl-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1274" class="member field" sym-ref="4064.bases">bases</a>[i];</td></tr><tr><th id="L450">450</th><td/></tr><tr><th id="L451">451</th><td>      <b>if</b> (<em>void</em>* cdata = <a href="../libclang-utils/include/libclang-utils/index-action.h.html#L58" class="member memfn" sym-ref="5256.getClientData">getClientData</a>(base-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1236" class="member field" sym-ref="4032.base">base</a>))</td></tr><tr><th id="L452">452</th><td>      {</td></tr><tr><th id="L453">453</th><td>        <a href="../../model/include/csnap/model/symbol.h.html#L153" class="type struct" sym-ref="4669.BaseClass">BaseClass</a> b;</td></tr><tr><th id="L454">454</th><td>        b.<a href="../../model/include/csnap/model/symbol.h.html#L156" class="member field" sym-ref="4671.base_id">base_id</a> <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> <b>reinterpret_cast</b>&lt;<a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>*&gt;(cdata)-&gt;<a href="../../model/include/csnap/model/symbol.h.html#L65" class="member field" sym-ref="4635.id">id</a>;</td></tr><tr><th id="L455">455</th><td>        b.<a href="../../model/include/csnap/model/symbol.h.html#L155" class="member field" sym-ref="4670.access_specifier">access_specifier</a> = <b>static_cast</b>&lt;<span class="namespace" sym-ref="4505.csnap">csnap</span>::<a href="../../model/include/csnap/model/symbol.h.html#L15" class="type enum" sym-ref="4600.AccessSpecifier">AccessSpecifier</a>&gt;(<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L53" class="member memfn" sym-ref="5255.libclangAPI">libclangAPI</a>().<a href="../libclang-utils/src/libclang.cpp.html#L425" class="member memfn" sym-ref="4435.cursor">cursor</a>(base-&gt;<a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1237" class="member field" sym-ref="4033.cursor">cursor</a>).<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L345" class="member memfn" sym-ref="5414.getCXXAccessSpecifier">getCXXAccessSpecifier</a>());</td></tr><tr><th id="L456">456</th><td>        bases.<span class="member memfn" sym-ref="1346.push_back">push_back</span>(b);</td></tr><tr><th id="L457">457</th><td>      }</td></tr><tr><th id="L458">458</th><td>    }</td></tr><tr><th id="L459">459</th><td/></tr><tr><th id="L460">460</th><td>    <b>if</b> (!bases.<span class="member memfn" sym-ref="1393.empty">empty</span>())</td></tr><tr><th id="L461">461</th><td>    {</td></tr><tr><th id="L462">462</th><td>      <a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>.<a href="../include/csnap/indexer/indexer.h.html#L61" class="member field" sym-ref="5308.bases">bases</a><span class="member memfn" sym-ref="5460.operator[]">[</span>symbol_id] <span class="member memfn" sym-ref="2465.operator=">=</span> <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="1399.move">move</span>(bases);</td></tr><tr><th id="L463">463</th><td>    }</td></tr><tr><th id="L464">464</th><td>  }</td></tr><tr><th id="L465">465</th><td/></tr><tr><th id="L466">466</th><td>  <em>void</em> <dfn class="member memfn" sym-ref="5464.list_bases">list_bases</dfn>(<em>const</em> <a href="../../model/include/csnap/model/symbol.h.html#L63" class="type struct" sym-ref="4580.Symbol">Symbol</a>&amp; symbol, <em>const</em> <a href="../libclang-utils/include/libclang-utils/cindex.h.html#L1222" class="type typedef" sym-ref="4006.CXIdxDeclInfo">CXIdxDeclInfo</a>* decl)</td></tr><tr><th id="L467">467</th><td>  {</td></tr><tr><th id="L468">468</th><td>    <a href="indexer.cpp.html#L438" class="member memfn" sym-ref="5461.list_bases">list_bases</a>(<a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">symbol</a>.<a href="../../model/include/csnap/model/symbol.h.html#L65" class="member field" sym-ref="4635.id">id</a>, decl);</td></tr><tr><th id="L469">469</th><td>  }</td></tr><tr><th id="L470">470</th><td>};</td></tr><tr><th id="L471">471</th><td/></tr><tr><th id="L472">472</th><td><b>class</b> <dfn class="type cxxclass" sym-ref="5475.IndexTranslationUnit">IndexTranslationUnit</dfn> : <b>public</b> <a href="../include/csnap/indexer/runnable.h.html#L16" class="type cxxclass" sym-ref="5192.Runnable">Runnable</a></td></tr><tr><th id="L473">473</th><td>{</td></tr><tr><th id="L474">474</th><td><b>public</b>:</td></tr><tr><th id="L475">475</th><td>  <a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>&amp; <dfn class="member field" sym-ref="5476.indexer">indexer</dfn>;</td></tr><tr><th id="L476">476</th><td>  <a href="../include/csnap/indexer/parsingresult.h.html#L18" class="type struct" sym-ref="5162.TranslationUnitParsingResult">TranslationUnitParsingResult</a> <dfn class="member field" sym-ref="5477.parsingResult">parsingResult</dfn>;</td></tr><tr><th id="L477">477</th><td/></tr><tr><th id="L478">478</th><td><b>public</b>:</td></tr><tr><th id="L479">479</th><td>  <dfn class="member constructor" sym-ref="5478.IndexTranslationUnit">IndexTranslationUnit</dfn>(<a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>&amp; idxr, <a href="../include/csnap/indexer/parsingresult.h.html#L18" class="type struct" sym-ref="5162.TranslationUnitParsingResult">TranslationUnitParsingResult</a> pr) :</td></tr><tr><th id="L480">480</th><td>    <a href="indexer.cpp.html#L475" class="member field" sym-ref="5476.indexer">indexer</a>(idxr),</td></tr><tr><th id="L481">481</th><td>    <a href="indexer.cpp.html#L476" class="member field" sym-ref="5477.parsingResult">parsingResult</a>(<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="1399.move">move</span>(pr))</td></tr><tr><th id="L482">482</th><td>  {</td></tr><tr><th id="L483">483</th><td>    <a href="indexer.cpp.html#L504" class="member field" sym-ref="5479.m_task_number">m_task_number</a> = ++<a href="indexer.cpp.html#L507" class="member staticvar" sym-ref="5480.m_task_counter">m_task_counter</a>;</td></tr><tr><th id="L484">484</th><td>  }</td></tr><tr><th id="L485">485</th><td/></tr><tr><th id="L486">486</th><td>  <em>void</em> <dfn class="member memfn" sym-ref="5481.run">run</dfn>() <b>override</b></td></tr><tr><th id="L487">487</th><td>  {</td></tr><tr><th id="L488">488</th><td>    <em>const</em> <a href="../../model/include/csnap/model/file.h.html#L15" class="type struct" sym-ref="4532.File">File</a>* sourcefile = <a href="indexer.cpp.html#L475" class="member field" sym-ref="5476.indexer">indexer</a>.<a href="indexer.cpp.html#L539" class="member memfn" sym-ref="5315.snapshot">snapshot</a>().<a href="../../db/src/snapshot.cpp.html#L243" class="member memfn" sym-ref="4704.files">files</a>().<a href="../../model/src/filelist.cpp.html#L55" class="member memfn" sym-ref="4555.get">get</a>(<a href="../../model/include/csnap/model/identifier.h.html#L19" class="member constructor" sym-ref="4522.Identifier<T>">parsingResult</a>.source-&gt;sourcefile_id);</td></tr><tr><th id="L489">489</th><td>    <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="variable" sym-ref="2526.cout">cout</span> <span class="fn" sym-ref="1750.operator<<">&lt;&lt;</span> <var>"["</var> <span class="member memfn" sym-ref="2122.operator<<">&lt;&lt;</span> <a href="indexer.cpp.html#L504" class="member field" sym-ref="5479.m_task_number">m_task_number</a> <span class="fn" sym-ref="1750.operator<<">&lt;&lt;</span> <var>"/"</var> <span class="member memfn" sym-ref="2122.operator<<">&lt;&lt;</span> <a href="indexer.cpp.html#L475" class="member field" sym-ref="5476.indexer">indexer</a>.<a href="indexer.cpp.html#L539" class="member memfn" sym-ref="5315.snapshot">snapshot</a>().<a href="../../db/src/snapshot.cpp.html#L331" class="member memfn" sym-ref="4710.translationUnits">translationUnits</a>().<a href="../../model/src/translationunitlist.cpp.html#L78" class="member memfn" sym-ref="4577.count">count</a>() <span class="fn" sym-ref="1750.operator<<">&lt;&lt;</span> <var>"] "</var> <span class="fn" sym-ref="1811.operator<<">&lt;&lt;</span> sourcefile-&gt;<a href="../../model/include/csnap/model/file.h.html#L18" class="member field" sym-ref="4535.path">path</a> <span class="member memfn" sym-ref="2098.operator<<">&lt;&lt;</span> <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="2099.endl">endl</span>;</td></tr><tr><th id="L490">490</th><td/></tr><tr><th id="L491">491</th><td>    <b>auto</b> start = <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="namespace" sym-ref="292.chrono">chrono</span>::<span class="type cxxtypealias" sym-ref="2573.high_resolution_clock">high_resolution_clock</span>::<span class="member staticfn" sym-ref="2571.now">now</span>();</td></tr><tr><th id="L492">492</th><td/></tr><tr><th id="L493">493</th><td>    <a href="indexer.cpp.html#L24" class="type cxxclass" sym-ref="5444.TranslationUnitIndexer">TranslationUnitIndexer</a> <a href="indexer.cpp.html#L35" class="member constructor" sym-ref="5449.TranslationUnitIndexer">tui</a>{ <a href="indexer.cpp.html#L475" class="member field" sym-ref="5476.indexer">indexer</a>, <a href="indexer.cpp.html#L476" class="member field" sym-ref="5477.parsingResult">parsingResult</a>.<a href="../include/csnap/indexer/parsingresult.h.html#L20" class="member field" sym-ref="5163.source">source</a> };</td></tr><tr><th id="L494">494</th><td>    <a href="indexer.cpp.html#L475" class="member field" sym-ref="5476.indexer">indexer</a>.<a href="indexer.cpp.html#L531" class="member memfn" sym-ref="5314.indexAction">indexAction</a>().<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L203" class="member memfn" sym-ref="5250.indexTranslationUnit">indexTranslationUnit</a>(<span class="member memfn" sym-ref="2183.operator*">*</span><a href="indexer.cpp.html#L476" class="member field" sym-ref="5477.parsingResult">parsingResult</a>.<a href="../include/csnap/indexer/parsingresult.h.html#L21" class="member field" sym-ref="5164.result">result</a>, tui);</td></tr><tr><th id="L495">495</th><td/></tr><tr><th id="L496">496</th><td>    <b>auto</b> end = <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="namespace" sym-ref="292.chrono">chrono</span>::<span class="type cxxtypealias" sym-ref="2573.high_resolution_clock">high_resolution_clock</span>::<span class="member staticfn" sym-ref="2571.now">now</span>();</td></tr><tr><th id="L497">497</th><td>    tui.<a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>.<a href="../include/csnap/indexer/indexer.h.html#L36" class="member field" sym-ref="5303.indexing_time">indexing_time</a> = <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="namespace" sym-ref="292.chrono">chrono</span>::<span class="fn" sym-ref="2568.duration_cast">duration_cast</span>&lt;<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="namespace" sym-ref="292.chrono">chrono</span>::<span class="type cxxtypealias" sym-ref="945.milliseconds">milliseconds</span>&gt;(end <span class="fn" sym-ref="5482.operator-">-</span> start);</td></tr><tr><th id="L498">498</th><td/></tr><tr><th id="L499">499</th><td>    <a href="indexer.cpp.html#L475" class="member field" sym-ref="5476.indexer">indexer</a>.<a href="indexer.cpp.html#L572" class="member memfn" sym-ref="5318.results">results</a>().<a href="../include/csnap/indexer/queue.h.html#L103" class="member memfn" sym-ref="5180.write">write</a>(<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="1399.move">move</span>(tui.<a href="indexer.cpp.html#L32" class="member field" sym-ref="5448.result">result</a>));</td></tr><tr><th id="L500">500</th><td>  }</td></tr><tr><th id="L501">501</th><td/></tr><tr><th id="L502">502</th><td><b>private</b>:</td></tr><tr><th id="L503">503</th><td>  <b>static</b> size_t <a href="indexer.cpp.html#L507" class="member staticvar" sym-ref="5480.m_task_counter">m_task_counter</a>;</td></tr><tr><th id="L504">504</th><td>  size_t <dfn class="member field" sym-ref="5479.m_task_number">m_task_number</dfn>;</td></tr><tr><th id="L505">505</th><td>};</td></tr><tr><th id="L506">506</th><td/></tr><tr><th id="L507">507</th><td>size_t <a href="indexer.cpp.html#L472" class="type cxxclass" sym-ref="5475.IndexTranslationUnit">IndexTranslationUnit</a>::<dfn class="member staticvar" sym-ref="5480.m_task_counter">m_task_counter</dfn> = <var>0</var>;</td></tr><tr><th id="L508">508</th><td/></tr><tr><th id="L509">509</th><td><a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>::<dfn class="member constructor" sym-ref="5311.Indexer">Indexer</dfn>(<span class="namespace" sym-ref="4133.libclang">libclang</span>::<a href="../libclang-utils/include/libclang-utils/clang-index.h.html#L25" class="type cxxclass" sym-ref="4136.Index">Index</a>&amp; index, <a href="../../db/include/csnap/database/snapshot.h.html#L34" class="type cxxclass" sym-ref="4686.Snapshot">Snapshot</a>&amp; snapshot) :</td></tr><tr><th id="L510">510</th><td>  <a href="../include/csnap/indexer/indexer.h.html#L108" class="member field" sym-ref="5322.m_index">m_index</a>(index),</td></tr><tr><th id="L511">511</th><td>  <a href="../include/csnap/indexer/indexer.h.html#L109" class="member field" sym-ref="5323.m_snapshot">m_snapshot</a>(snapshot),</td></tr><tr><th id="L512">512</th><td>  <a href="../include/csnap/indexer/indexer.h.html#L112" class="member field" sym-ref="5326.m_threads">m_threads</a>(<var>1</var>), <i>// $Note: not sure clang index action is thread-safe so we only use 1 thread for indexing</i></td></tr><tr><th id="L513">513</th><td>  <a href="../include/csnap/indexer/indexer.h.html#L114" class="member field" sym-ref="5328.m_file_id_generator">m_file_id_generator</a>((<em>int</em>)snapshot.<a href="../../db/src/snapshot.cpp.html#L243" class="member memfn" sym-ref="4704.files">files</a>().<a href="../../model/src/filelist.cpp.html#L43" class="member memfn" sym-ref="4554.all">all</a>().<span class="member memfn" sym-ref="1405.size">size</span>())</td></tr><tr><th id="L514">514</th><td>{</td></tr><tr><th id="L515">515</th><td>  <a href="../include/csnap/indexer/indexer.h.html#L110" class="member field" sym-ref="5324.m_index_action">m_index_action</a> <span class="member memfn" sym-ref="2421.operator=">=</span> <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="4848.make_unique">make_unique</span>&lt;<span class="namespace" sym-ref="4133.libclang">libclang</span>::<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L20" class="type cxxclass" sym-ref="5241.IndexAction">IndexAction</a>&gt;(index);</td></tr><tr><th id="L516">516</th><td>}</td></tr><tr><th id="L517">517</th><td/></tr><tr><th id="L518">518</th><td><a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>::<dfn class="member destructor" sym-ref="5312.~Indexer">~Indexer</dfn>()</td></tr><tr><th id="L519">519</th><td>{</td></tr><tr><th id="L520">520</th><td>  <b>if</b> (!<a href="indexer.cpp.html#L572" class="member memfn" sym-ref="5318.results">results</a>().<a href="../include/csnap/indexer/queue.h.html#L121" class="member memfn" sym-ref="5181.empty">empty</a>())</td></tr><tr><th id="L521">521</th><td>  {</td></tr><tr><th id="L522">522</th><td>    <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="variable" sym-ref="2526.cout">cout</span> <span class="fn" sym-ref="1750.operator<<">&lt;&lt;</span> <var>"Warning: results() isn't empty in ~Indexer()"</var> <span class="member memfn" sym-ref="2098.operator<<">&lt;&lt;</span> <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="2099.endl">endl</span>;</td></tr><tr><th id="L523">523</th><td>  }</td></tr><tr><th id="L524">524</th><td>}</td></tr><tr><th id="L525">525</th><td/></tr><tr><th id="L526">526</th><td><span class="namespace" sym-ref="4133.libclang">libclang</span>::<a href="../libclang-utils/include/libclang-utils/libclang.h.html#L33" class="type cxxclass" sym-ref="4139.LibClang">LibClang</a>&amp; <a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>::<dfn class="member memfn" sym-ref="5313.libclangAPI">libclangAPI</dfn>()</td></tr><tr><th id="L527">527</th><td>{</td></tr><tr><th id="L528">528</th><td>  <b>return</b> <a href="indexer.cpp.html#L531" class="member memfn" sym-ref="5314.indexAction">indexAction</a>().<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L23" class="member field" sym-ref="5242.api">api</a>;</td></tr><tr><th id="L529">529</th><td>}</td></tr><tr><th id="L530">530</th><td/></tr><tr><th id="L531">531</th><td><span class="namespace" sym-ref="4133.libclang">libclang</span>::<a href="../libclang-utils/include/libclang-utils/index-action.h.html#L20" class="type cxxclass" sym-ref="5241.IndexAction">IndexAction</a>&amp; <a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>::<dfn class="member memfn" sym-ref="5314.indexAction">indexAction</dfn>()</td></tr><tr><th id="L532">532</th><td>{</td></tr><tr><th id="L533">533</th><td>  <b>return</b> <span class="member memfn" sym-ref="2183.operator*">*</span><a href="../include/csnap/indexer/indexer.h.html#L110" class="member field" sym-ref="5324.m_index_action">m_index_action</a>;</td></tr><tr><th id="L534">534</th><td>}</td></tr><tr><th id="L535">535</th><td/></tr><tr><th id="L536">536</th><td><i>/**</i></td></tr><tr><th id="L537">537</th><td><i> * \brief returns a reference to the snapshot passed to the constructor</i></td></tr><tr><th id="L538">538</th><td><i> */</i></td></tr><tr><th id="L539">539</th><td><a href="../../db/include/csnap/database/snapshot.h.html#L34" class="type cxxclass" sym-ref="4686.Snapshot">Snapshot</a>&amp; <a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>::<dfn class="member memfn" sym-ref="5315.snapshot">snapshot</dfn>() <em>const</em></td></tr><tr><th id="L540">540</th><td>{</td></tr><tr><th id="L541">541</th><td>  <b>return</b> <a href="../include/csnap/indexer/indexer.h.html#L109" class="member field" sym-ref="5323.m_snapshot">m_snapshot</a>;</td></tr><tr><th id="L542">542</th><td>}</td></tr><tr><th id="L543">543</th><td/></tr><tr><th id="L544">544</th><td><i>/**</i></td></tr><tr><th id="L545">545</th><td><i> * \brief starts the indexing of a translation unit asynchronously</i></td></tr><tr><th id="L546">546</th><td><i> * \param parsingResult  parsing result as produced by the Parser class</i></td></tr><tr><th id="L547">547</th><td><i> * </i></td></tr><tr><th id="L548">548</th><td><i> * Please note that although indexing is performed asynchronously, it is </i></td></tr><tr><th id="L549">549</th><td><i> * not really "multi-threaded": only a sinlge thread performs the indexing.</i></td></tr><tr><th id="L550">550</th><td><i> * This means that the indexing of @a parsingResult will only start after </i></td></tr><tr><th id="L551">551</th><td><i> * all previous calls to asyncIndex() have completed.</i></td></tr><tr><th id="L552">552</th><td><i> */</i></td></tr><tr><th id="L553">553</th><td><em>void</em> <a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>::<dfn class="member memfn" sym-ref="5316.asyncIndex">asyncIndex</dfn>(<a href="../include/csnap/indexer/parsingresult.h.html#L18" class="type struct" sym-ref="5162.TranslationUnitParsingResult">TranslationUnitParsingResult</a> parsingResult)</td></tr><tr><th id="L554">554</th><td>{</td></tr><tr><th id="L555">555</th><td>  <b>if</b> (!<span class="member convfn" sym-ref="2416.operator bool">parsingResult</span>.<a href="../include/csnap/indexer/parsingresult.h.html#L21" class="member field" sym-ref="5164.result">result</a>)</td></tr><tr><th id="L556">556</th><td>    <b>return</b>;</td></tr><tr><th id="L557">557</th><td/></tr><tr><th id="L558">558</th><td>  <a href="../include/csnap/indexer/indexer.h.html#L112" class="member field" sym-ref="5326.m_threads">m_threads</a>.<a href="threadpool.cpp.html#L66" class="member memfn" sym-ref="5208.run">run</a>(new <a href="indexer.cpp.html#L472" class="type cxxclass" sym-ref="5475.IndexTranslationUnit">IndexTranslationUnit</a>(*<b>this</b>, <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="1399.move">move</span>(parsingResult)));</td></tr><tr><th id="L559">559</th><td>}</td></tr><tr><th id="L560">560</th><td/></tr><tr><th id="L561">561</th><td><i>/**</i></td></tr><tr><th id="L562">562</th><td><i> * \brief returns whether all indexing tasks have been completed</i></td></tr><tr><th id="L563">563</th><td><i> */</i></td></tr><tr><th id="L564">564</th><td><em>bool</em> <a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>::<dfn class="member memfn" sym-ref="5317.done">done</dfn>() <em>const</em></td></tr><tr><th id="L565">565</th><td>{</td></tr><tr><th id="L566">566</th><td>  <b>return</b> <a href="../include/csnap/indexer/indexer.h.html#L112" class="member field" sym-ref="5326.m_threads">m_threads</a>.<a href="threadpool.cpp.html#L96" class="member memfn" sym-ref="5211.done">done</a>();</td></tr><tr><th id="L567">567</th><td>}</td></tr><tr><th id="L568">568</th><td/></tr><tr><th id="L569">569</th><td><i>/**</i></td></tr><tr><th id="L570">570</th><td><i> * \brief returns the indexer results queue</i></td></tr><tr><th id="L571">571</th><td><i> */</i></td></tr><tr><th id="L572">572</th><td><a href="../include/csnap/indexer/indexer.h.html#L64" class="type cxxtypealias" sym-ref="5309.IndexerResultQueue">IndexerResultQueue</a>&amp; <a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>::<dfn class="member memfn" sym-ref="5318.results">results</dfn>()</td></tr><tr><th id="L573">573</th><td>{</td></tr><tr><th id="L574">574</th><td>  <b>return</b> <a href="../include/csnap/indexer/indexer.h.html#L111" class="member field" sym-ref="5325.m_results">m_results</a>;</td></tr><tr><th id="L575">575</th><td>}</td></tr><tr><th id="L576">576</th><td/></tr><tr><th id="L577">577</th><td><i>/**</i></td></tr><tr><th id="L578">578</th><td><i> * \brief returns a pointer to a File matching the given path</i></td></tr><tr><th id="L579">579</th><td><i> * \param path the path of the file</i></td></tr><tr><th id="L580">580</th><td><i> * </i></td></tr><tr><th id="L581">581</th><td><i> * If the file currently does not exist in the snapshot and \a collect_new_files </i></td></tr><tr><th id="L582">582</th><td><i> * is true, a new File object is created ; otherwise, this function returns nullptr.</i></td></tr><tr><th id="L583">583</th><td><i> * </i></td></tr><tr><th id="L584">584</th><td><i> * This function returns a pair of pointers, a non-owning and an owning one;</i></td></tr><tr><th id="L585">585</th><td><i> * only one of which is not null, depending on whether a File object was </i></td></tr><tr><th id="L586">586</th><td><i> * actually created by this call.</i></td></tr><tr><th id="L587">587</th><td><i> */</i></td></tr><tr><th id="L588">588</th><td><a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="170.pair">pair</span>&lt;<a href="../../model/include/csnap/model/file.h.html#L15" class="type struct" sym-ref="4532.File">File</a>*, <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxclass" sym-ref="529.unique_ptr">unique_ptr</span>&lt;<a href="../../model/include/csnap/model/file.h.html#L15" class="type struct" sym-ref="4532.File">File</a>&gt;&gt; <a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>::<dfn class="member memfn" sym-ref="5319.getFile">getFile</dfn>(<a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="type cxxtypealias" sym-ref="32.string">string</span> path)</td></tr><tr><th id="L589">589</th><td>{</td></tr><tr><th id="L590">590</th><td>  <i>// $TODO: make thread-safe</i></td></tr><tr><th id="L591">591</th><td/></tr><tr><th id="L592">592</th><td>  <a href="../../model/include/csnap/model/file.h.html#L15" class="type struct" sym-ref="4532.File">File</a>* f = <a href="indexer.cpp.html#L539" class="member memfn" sym-ref="5315.snapshot">snapshot</a>().<a href="../../db/src/snapshot.cpp.html#L230" class="member memfn" sym-ref="4703.findFile">findFile</a>(path);</td></tr><tr><th id="L593">593</th><td/></tr><tr><th id="L594">594</th><td>  <b>if</b> (f || !<a href="../include/csnap/indexer/indexer.h.html#L105" class="member field" sym-ref="5321.collect_new_files">collect_new_files</a>)</td></tr><tr><th id="L595">595</th><td>    <b>return</b> <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> f, <b>nullptr</b> };</td></tr><tr><th id="L596">596</th><td/></tr><tr><th id="L597">597</th><td>  f = new <a href="../../model/include/csnap/model/file.h.html#L15" class="type struct" sym-ref="4532.File">File</a>;</td></tr><tr><th id="L598">598</th><td>  f-&gt;<a href="../../model/include/csnap/model/file.h.html#L18" class="member field" sym-ref="4535.path">path</a> <span class="member memfn" sym-ref="1752.operator=">=</span> <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::<span class="fn" sym-ref="1399.move">move</span>(path);</td></tr><tr><th id="L599">599</th><td>  f-&gt;<a href="../../model/include/csnap/model/file.h.html#L17" class="member field" sym-ref="4534.id">id</a> <a href="../../model/include/csnap/model/identifier.h.html#L38" class="member memfn" sym-ref="4527.operator=">=</a> <a href="../../model/include/csnap/model/identifier.h.html#L22" class="member constructor" sym-ref="4524.Identifier<T>">FileId</a>(m_file_id_generator++);</td></tr><tr><th id="L600">600</th><td/></tr><tr><th id="L601">601</th><td>  <b>return</b> <span class="member constructor" sym-ref="5468.pair<_Ty1, _Ty2>">{</span> <b>nullptr</b>, <a href="../libclang-utils/include/libclang-utils/clang-cursor.h.html#L526" class="namespace" sym-ref="4.std">std</a>::unique_ptr&lt;File&gt;(f) };</td></tr><tr><th id="L602">602</th><td>}</td></tr><tr><th id="L603">603</th><td/></tr><tr><th id="L604">604</th><td><i>/**</i></td></tr><tr><th id="L605">605</th><td><i> * \brief a usr map shared among all indexing tasks</i></td></tr><tr><th id="L606">606</th><td><i> * </i></td></tr><tr><th id="L607">607</th><td><i> * USRs (Unified Symbol Resolution) are used to match symbols across translation units.</i></td></tr><tr><th id="L608">608</th><td><i> * This map is used to always assign the same id to a symbol across all indexing tasks.</i></td></tr><tr><th id="L609">609</th><td><i> */</i></td></tr><tr><th id="L610">610</th><td><a href="../../model/include/csnap/model/usrmap.h.html#L39" class="type cxxclass" sym-ref="5223.GlobalUsrMap">GlobalUsrMap</a>&amp; <a href="../include/csnap/indexer/indexer.h.html#L71" class="type cxxclass" sym-ref="5310.Indexer">Indexer</a>::<dfn class="member memfn" sym-ref="5320.sharedUsrMap">sharedUsrMap</dfn>()</td></tr><tr><th id="L611">611</th><td>{</td></tr><tr><th id="L612">612</th><td>  <b>return</b> <a href="../include/csnap/indexer/indexer.h.html#L113" class="member field" sym-ref="5327.m_usrs">m_usrs</a>;</td></tr><tr><th id="L613">613</th><td>}</td></tr><tr><th id="L614">614</th><td/></tr><tr><th id="L615">615</th><td>} <i>// namespace csnap</i></td></tr></tbody></table></div></body></html>